<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Clueso - All Projects</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <script src="https://unpkg.com/lucide@latest"></script>
</head>
<body>
    <div class="app-container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-top">
                <div class="logo">
                    <div class="logo-icon"></div>
                    <span>Clueso</span>
                </div>
                
                <button class="btn-primary-new">
                    <i data-lucide="plus"></i>
                    New video
                </button>

                <div class="search-container">
                    <i data-lucide="search" class="search-icon"></i>
                    <input type="text" placeholder="Search..." class="search-input">
                </div>

                
                <nav class="nav-menu">
                    <a href="index.html" class="nav-item ">
                        <i data-lucide="home"></i>
                        Home
                    </a>
                    <a href="projects.html" class="nav-item active">
                        <i data-lucide="folder"></i>
                        All Projects
                    </a>
                    <a href="templates.html" class="nav-item ">
                        <i data-lucide="layout-template"></i>
                        Video Templates
                    </a>
                    <a href="#" class="nav-item" id="btn-trigger-export">
                        <i data-lucide="play-circle"></i>
                        Simulate Export
                    </a>
                    <a href="#" class="nav-item">
                        <i data-lucide="zap"></i>
                        Auto-update
                    </a>
                    <a href="team.html" class="nav-item ">
                        <i data-lucide="users"></i>
                        Team
                    </a>
                    <a href="#" class="nav-item">
                        <i data-lucide="bar-chart-2"></i>
                        Analytics
                    </a>
                </nav>
            </div>

            <div class="sidebar-bottom">
                <a href="settings.html" class="nav-item ">
                    <i data-lucide="settings"></i>
                    Settings
                </a>
                <a href="#" class="nav-item">
                    <i data-lucide="trash-2"></i>
                    Trash
                </a>
    
                <div style="margin-top: 1rem; padding-top: 1rem; border-top: 1px solid var(--border-base);">
                    <div style="font-size: 0.7rem; color: var(--text-tertiary); padding-left: 0.75rem; margin-bottom: 0.5rem; text-transform: uppercase; letter-spacing: 0.05em;">Themes</div>
                    <a href="../index.html" class="nav-item" style="margin-top: 0.25rem;">
                        <i data-lucide="moon"></i>
                        Dark Mode
                    </a>
                    <a href="#" class="nav-item" style="opacity: 0.5; cursor: default;">
                        <i data-lucide="sun"></i>
                        Light Mode
                    </a>
                </div>
                <div class="user-profile">
                    <div class="avatar">K</div>
                    <div class="user-info">
                        <span class="name">Koushith's Team</span>
                        <span class="email">koushith97@gm...</span>
                    </div>
                </div>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Projects Hero -->
            <header class="hero-section projects-hero">
                <div class="hero-content">
                    <h1>All Projects</h1>
                    <p>Manage and organize all your video content in one place.</p>
                </div>
                
                <!-- Controls -->
                <div class="projects-controls">
                    <div class="control-group">
                        <button class="control-btn active">All</button>
                        <button class="control-btn">Published</button>
                        <button class="control-btn">Drafts</button>
                    </div>
                    <div class="control-group right">
                        <button class="icon-btn" title="Grid View"><i data-lucide="grid"></i></button>
                        <button class="icon-btn" title="List View"><i data-lucide="list"></i></button>
                    </div>
                </div>
            </header>

            <div class="content-wrapper projects-wrapper">
                
                <!-- Projects Grid -->
                <div class="all-projects-grid">
                    
                    <!-- Project Card 1 -->
                    <div class="card project-card">
                        <div class="pro-card-thumb">
                            <div class="thumb-overlay">
                                <button class="btn-play-small"><i data-lucide="play"></i></button>
                            </div>
                            <span class="duration-badge">02:14</span>
                        </div>
                        <div class="pro-card-info">
                            <div class="pro-header">
                                <h3>Product Demo Workflow</h3>
                                <button class="more-btn"><i data-lucide="more-horizontal"></i></button>
                            </div>
                            <div class="pro-meta">
                                <span class="status-dot published"></span> Published • 2 days ago
                            </div>
                            <div class="pro-footer">
                                <div class="creator-badge">
                                    <div class="avatar-tiny">K</div>
                                    <span>Koushith</span>
                                </div>
                                <div class="views-count">
                                    <i data-lucide="eye"></i> 1.2k
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Project Card 2 -->
                    <div class="card project-card">
                        <div class="pro-card-thumb">
                            <div class="thumb-overlay">
                                <button class="btn-play-small"><i data-lucide="play"></i></button>
                            </div>
                            <span class="duration-badge">01:05</span>
                        </div>
                        <div class="pro-card-info">
                            <div class="pro-header">
                                <h3>Onboarding V2</h3>
                                <button class="more-btn"><i data-lucide="more-horizontal"></i></button>
                            </div>
                            <div class="pro-meta">
                                <span class="status-dot draft"></span> Draft • 5 hours ago
                            </div>
                            <div class="pro-footer">
                                <div class="creator-badge">
                                    <div class="avatar-tiny">K</div>
                                    <span>Koushith</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Project Card 3 -->
                    <div class="card project-card">
                        <div class="pro-card-thumb">
                            <div class="thumb-overlay">
                                <button class="btn-play-small"><i data-lucide="play"></i></button>
                            </div>
                            <span class="duration-badge">04:30</span>
                        </div>
                        <div class="pro-card-info">
                            <div class="pro-header">
                                <h3>Q4 Report Summary</h3>
                                <button class="more-btn"><i data-lucide="more-horizontal"></i></button>
                            </div>
                            <div class="pro-meta">
                                <span class="status-dot published"></span> Published • 1 week ago
                            </div>
                            <div class="pro-footer">
                                <div class="creator-badge">
                                    <div class="avatar-tiny">S</div>
                                    <span>Sarah</span>
                                </div>
                                <div class="views-count">
                                    <i data-lucide="eye"></i> 856
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Project Card 4 -->
                    <div class="card project-card">
                        <div class="pro-card-thumb">
                            <div class="thumb-overlay">
                                <button class="btn-play-small"><i data-lucide="play"></i></button>
                            </div>
                            <span class="duration-badge">00:45</span>
                        </div>
                        <div class="pro-card-info">
                            <div class="pro-header">
                                <h3>New Feature Teaser</h3>
                                <button class="more-btn"><i data-lucide="more-horizontal"></i></button>
                            </div>
                            <div class="pro-meta">
                                <span class="status-dot draft"></span> Draft • Just now
                            </div>
                            <div class="pro-footer">
                                <div class="creator-badge">
                                    <div class="avatar-tiny">K</div>
                                    <span>Koushith</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Project Card 5 -->
                    <div class="card project-card">
                        <div class="pro-card-thumb">
                            <div class="thumb-overlay">
                                <button class="btn-play-small"><i data-lucide="play"></i></button>
                            </div>
                            <span class="duration-badge">03:20</span>
                        </div>
                        <div class="pro-card-info">
                            <div class="pro-header">
                                <h3>Customer Success Story</h3>
                                <button class="more-btn"><i data-lucide="more-horizontal"></i></button>
                            </div>
                            <div class="pro-meta">
                                <span class="status-dot published"></span> Published • 2 weeks ago
                            </div>
                            <div class="pro-footer">
                                <div class="creator-badge">
                                    <div class="avatar-tiny">A</div>
                                    <span>Alex</span>
                                </div>
                                <div class="views-count">
                                    <i data-lucide="eye"></i> 2.4k
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>
    <script>
        lucide.createIcons();
    </script>
    <!-- EXPORT WIDGET OVERLAY -->
    <div class="export-widget-container" style="display: none;">
        <div class="export-card">
            <!-- Minimized View -->
            <div class="mini-progress">
                <div class="spinner"></div>
                <div class="mini-text">Exporting <span>0%</span></div>
            </div>

            <!-- Expanded View -->
            <div class="export-header">
                <div class="export-title">
                    <i data-lucide="loader-2" class="spin-icon"></i>
                    Export in progress
                </div>
                <button class="minimize-btn" title="Minimize">
                    <i data-lucide="minus"></i>
                </button>
            </div>

            <div class="export-content">
                <div class="status-row">
                    <div class="preview-thumbnail">
                        <img src="https://images.unsplash.com/photo-1611162617474-5b21e879e113?q=80&w=100&auto=format&fit=crop" alt="Thumbnail">
                    </div>
                    <div class="status-info">
                        <h4 class="status-title">Rendering your video</h4>
                        <p>Estimated time: 15s</p>
                    </div>
                </div>

                <div class="progress-section">
                    <div class="progress-header">
                        <span>Progress</span>
                        <span class="percentage-text">0%</span>
                    </div>
                    <div class="progress-track">
                        <div class="progress-fill"></div>
                    </div>
                </div>

                <div class="export-actions">
                    <button class="btn-cancel">Cancel</button>
                    <button class="btn-view">View Video</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        lucide.createIcons();

        // Export Widget Logic
        const triggerBtn = document.getElementById('btn-trigger-export');
        const widgetContainer = document.querySelector('.export-widget-container');
        const card = document.querySelector('.export-card');
        const minimizeBtn = document.querySelector('.minimize-btn');
        const progressFill = document.querySelector('.progress-fill');
        const percentageText = document.querySelector('.percentage-text');
        const btnView = document.querySelector('.btn-view');
        const statusTitle = document.querySelector('.status-title');
        const miniText = document.querySelector('.mini-text');
        const spinner = document.querySelector('.spinner');
        const titleIcon = document.querySelector('.spin-icon');
        const cancelBtn = document.querySelector('.btn-cancel');
        const exportTitle = document.querySelector('.export-title');

        let progress = 0;
        let isSimulating = false;
        let animationFrame;

        // Trigger Export
        if (triggerBtn) {
            triggerBtn.addEventListener('click', (e) => {
                e.preventDefault();
                if (isSimulating) return; // Already running
                
                resetExport();
                widgetContainer.style.display = 'block';
                card.classList.remove('minimized');
                isSimulating = true;
                simulate();
            });
        }

        // Toggle Minimized
        if (minimizeBtn) {
            minimizeBtn.addEventListener('click', (e) => {
                e.stopPropagation();
                card.classList.add('minimized');
            });
        }

        // Click to expand (if minimized)
        if (card) {
            card.addEventListener('click', (e) => {
                if (card.classList.contains('minimized')) {
                    card.classList.remove('minimized');
                }
            });
        }

        if (cancelBtn) {
            cancelBtn.addEventListener('click', () => {
                widgetContainer.style.display = 'none';
                isSimulating = false;
                cancelAnimationFrame(animationFrame);
            });
        }

        if (btnView) {
            btnView.addEventListener('click', () => {
                 alert("Opening video...");
                 widgetContainer.style.display = 'none';
            });
        }

        function resetExport() {
            progress = 0;
            statusTitle.textContent = "Rendering your video";
            miniText.innerHTML = "Exporting <span>0%</span>";
            progressFill.style.width = '0%';
            percentageText.textContent = '0%';
            btnView.classList.remove('ready');
            
            // Reset icons
            spinner.style.borderTopColor = 'var(--brand-primary)';
            spinner.style.animation = 'spin 1s linear infinite';
            
            // Fix title icon if it was replaced
            const existingCheck = exportTitle.querySelector('[data-lucide="check-circle"]');
            if (existingCheck) existingCheck.remove();
            
            if (!exportTitle.contains(titleIcon)) {
                exportTitle.innerHTML = '<i data-lucide="loader-2" class="spin-icon"></i> Export in progress';
                lucide.createIcons();
            } else {
                titleIcon.style.opacity = '1';
                titleIcon.style.animation = 'spin 2s linear infinite';
            }
        }

        function simulate() {
            if (!isSimulating) return;

            if (progress >= 100) {
                // Complete State
                progress = 100;
                updateUI();
                
                statusTitle.textContent = "Video is ready!";
                miniText.innerHTML = "Video ready";
                btnView.classList.add('ready');
                
                // Stop animations
                spinner.style.borderTopColor = '#10b981';
                spinner.style.animation = 'none';
                
                // Keep title simple for now to avoid complex dom manipulation errors in simulation
                const icon = exportTitle.querySelector('i');
                if(icon) icon.style.opacity = '0'; 
                
                if(!exportTitle.querySelector('[data-lucide="check-circle"]')) {
                    const checkIcon = document.createElement('i');
                    checkIcon.setAttribute('data-lucide', 'check-circle');
                    checkIcon.style.color = '#10b981';
                    exportTitle.insertBefore(checkIcon, exportTitle.firstChild);
                    if(icon) icon.remove();
                    lucide.createIcons();
                }

                isSimulating = false;
                return;
            }

            // Variable speed simulation
            const increment = Math.random() * 0.8; 
            progress += increment;
            if (progress > 100) progress = 100;

            updateUI();
            
            animationFrame = requestAnimationFrame(() => {
                setTimeout(simulate, 30 + Math.random() * 50);
            });
        }

        function updateUI() {
            const pct = Math.round(progress);
            progressFill.style.width = `${pct}%`;
            percentageText.textContent = `${pct}%`;
            miniText.innerHTML = `Exporting <span>${pct}%</span>`;
        }
    </script>
</body>
</html>
